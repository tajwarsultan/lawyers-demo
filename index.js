const lawyersData = [
  {
    state: "NC",
    region: "Piedmont",
    city: "Daytona Beach",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Jared A. Frankel",
    firm: "The Frankel Law Firm",
    street: "112 Orange Ave",
    ste: "Ste 208",
    st: "NC",
    zip: 32114,
    practice:
      "Divorce, Child Custody & Support, Custody & Support Modifications, Paternity, Pre-Nuptial Agreements. Board Certified: Mediation",
    statement:
      "I have always believed in the idea of fairness and equality for all. I bring that commitment to the practice of Family Law. I strive to reach the best possible outcome for everyone involved.",
    reviews:
      '<script src="https://static.elfsight.com/platform/platform.js" async></script><div class="elfsight-app-1ba07685-90d1-4f0b-9794-39f1b1316709" data-elfsight-app-lazy></div>',
    "con-1": "https://yourside.com/img/icons/consult-paid.png",
    "con-2": "https://yourside.com/img/icons/consult-video.png",
    "con-3": "https://yourside.com/img/icons/consult-phone.png",
    "voice-text": "https://yourside.com/img/icons/voice-only.png",
    phone: "386-868-0076",
    website: "https://divorcedaytona.com",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Kissimmee",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Joseph R. Greschner",
    firm: "Greschner Law",
    street: "519 Patrick St",
    ste: "",
    st: "NC",
    zip: 34741,
    practice:
      "Divorce, Child Support, Timesharing, Paternity, Same-Sex Families, Child Relocation, Modifications, Mediation",
    statement:
      "The process of divorce does not have to be stressful or contentious. I will work with you to focus on your goals while advising you on what's realistic and in your best interest.",
    reviews: "",
    "con-1": "https://yourside.com/img/icons/consult-noCost.png",
    "con-2": "https://yourside.com/img/icons/consult-phone.png",
    "con-3": "",
    "voice-text": "https://yourside.com/img/icons/voice-text.png",
    phone: "407-846-7889",
    website: "https://osceoladivorcelawyer.com",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Satellite Beach",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Lesley Turmelle Abbott",
    firm: "Lesley Turmelle Abbott, P.A.",
    street: "",
    ste: "",
    st: "NC",
    zip: 32937,
    practice: "",
    statement: "",
    reviews: "",
    "con-1": "",
    "con-2": "",
    "con-3": "",
    "voice-text": "",
    phone: "",
    website: "",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Loxahatchee",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Jo Ann Abrams",
    firm: "Jo Ann Abrams, Attorney at Law",
    street: "",
    ste: "",
    st: "NC",
    zip: 33470,
    practice: "",
    statement: "",
    reviews: "",
    "con-1": "",
    "con-2": "",
    "con-3": "",
    "voice-text": "",
    phone: "",
    website: "",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Coral Springs",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Mark Abzug",
    firm: "Law Offices of Mark Abzug, P.A.",
    street: "",
    ste: "",
    st: "NC",
    zip: 33065,
    practice: "",
    statement: "",
    reviews: "",
    "con-1": "",
    "con-2": "",
    "con-3": "",
    "voice-text": "",
    phone: "",
    website: "",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Tallahassee",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Kristin K. Adamson",
    firm: "Adamson Law",
    street: "",
    ste: "",
    st: "NC",
    zip: 32309,
    practice: "",
    statement: "",
    reviews: "",
    "con-1": "",
    "con-2": "",
    "con-3": "",
    "voice-text": "",
    phone: "",
    website: "",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Panama City",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Alia Adhal",
    firm: "Alia Adhal, P.A.",
    street: "",
    ste: "",
    st: "NC",
    zip: 32401,
    practice: "",
    statement: "",
    reviews: "",
    "con-1": "",
    "con-2": "",
    "con-3": "",
    "voice-text": "",
    phone: "",
    website: "",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Defuniak Springs",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Clay Brown Adkinson",
    firm: "Adkinson Law Firm, LLC",
    street: "",
    ste: "",
    st: "NC",
    zip: 32435,
    practice: "",
    statement: "",
    reviews: "",
    "con-1": "",
    "con-2": "",
    "con-3": "",
    "voice-text": "",
    phone: "",
    website: "",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Chipley",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Richard Kerry Adkison",
    firm: "Kerry Adkison, P.A.",
    street: "",
    ste: "",
    st: "NC",
    zip: 32428,
    practice: "",
    statement: "",
    reviews: "",
    "con-1": "",
    "con-2": "",
    "con-3": "",
    "voice-text": "",
    phone: "",
    website: "",
  },
  {
    state: "NC",
    region: "Piedmont",
    city: "Cooper City",
    photo:
      "https://i.pinimg.com/236x/ab/57/ca/ab57cadd895944460c54e562c50d352e.jpg",
    lawyer: "Gladys Maria Aguero",
    firm: "Gladys M. Aguero, P.A.",
    street: "",
    ste: "",
    st: "NC",
    zip: 33330,
    practice: "",
    statement: "",
    reviews: "",
    "con-1": "",
    "con-2": "",
    "con-3": "",
    "voice-text": "",
    phone: "",
    website: "",
  },
];

const hamburger = document.querySelector(".hamburger");
const sidebar = document.querySelector(".sidebar");
const overlay = document.querySelector(".overlay");
const lawyerGrid = document.getElementById("lawyerGrid");
const paginationContainer = document.getElementById("pagination");
const citySelect = document.getElementById("city");
const regionSelect = document.getElementById("region");
const practiceInput = document.getElementById("practice");
const searchInput = document.getElementById("search");

let currentPage = 1;
const itemsPerPage = 6;
let filteredLawyers = [...lawyersData];

hamburger.addEventListener("click", function () {
  hamburger.classList.toggle("active");
  sidebar.classList.toggle("active");
  overlay.classList.toggle("active");
  document.body.style.overflow = sidebar.classList.contains("active")
    ? "hidden"
    : "";
});

overlay.addEventListener("click", function () {
  hamburger.classList.remove("active");
  sidebar.classList.remove("active");
  overlay.classList.remove("active");
  document.body.style.overflow = "";
});

function populateCityDropdown() {
  const selectedRegion = regionSelect.value;

  const filteredCities = selectedRegion
    ? [
        ...new Set(
          lawyersData
            .filter((lawyer) => lawyer.region === selectedRegion)
            .map((lawyer) => lawyer.city)
        ),
      ]
    : [...new Set(lawyersData.map((lawyer) => lawyer.city))];

  const sortedCities = filteredCities.sort();

  citySelect.innerHTML = '<option value="">All Cities</option>';

  sortedCities.forEach((city) => {
    const option = document.createElement("option");
    option.value = city;
    option.textContent = city;
    citySelect.appendChild(option);
  });
}

regionSelect.addEventListener("change", populateCityDropdown);

document.addEventListener("DOMContentLoaded", populateCityDropdown);

function applyFilters() {
  const selectedRegion = regionSelect.value;
  const selectedCity = citySelect.value;
  const practiceSearch = practiceInput.value.toLowerCase();
  const generalSearch = searchInput.value.toLowerCase();

  filteredLawyers = lawyersData.filter((lawyer) => {
    if (selectedRegion && lawyer.region !== selectedRegion) {
      return false;
    }

    if (selectedCity && lawyer.city !== selectedCity) {
      return false;
    }

    if (
      practiceSearch &&
      !lawyer.practice.toLowerCase().includes(practiceSearch)
    ) {
      return false;
    }

    if (generalSearch) {
      const searchableText =
        `${lawyer.lawyer} ${lawyer.firm} ${lawyer.practice}`.toLowerCase();
      if (!searchableText.includes(generalSearch)) {
        return false;
      }
    }

    return true;
  });

  currentPage = 1;
  renderLawyerCards();
  createPagination();
}

regionSelect.addEventListener("change", applyFilters);
citySelect.addEventListener("change", applyFilters);
practiceInput.addEventListener("input", applyFilters);
searchInput.addEventListener("input", applyFilters);

populateCityDropdown();
applyFilters();

function renderLawyerCards() {
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const currentLawyers = filteredLawyers.slice(startIndex, endIndex);

  lawyerGrid.innerHTML = "";

  if (currentLawyers.length === 0) {
    lawyerGrid.innerHTML =
      '<div class="no-results">No lawyers found matching your criteria.</div>';
    return;
  }

  currentLawyers.forEach((lawyer) => {
    const lawyerCard = document.createElement("div");
    lawyerCard.className = "lawyer-card";

    const photoSrc = lawyer.photo.startsWith("http")
      ? lawyer.photo
      : "/api/placeholder/300/200";

    const addressParts = [];
    if (lawyer.street) addressParts.push(lawyer.street);
    if (lawyer.ste) addressParts.push(lawyer.ste);
    if (lawyer.city) addressParts.push(lawyer.city);
    if (lawyer.st) addressParts.push(lawyer.st);
    if (lawyer.zip) addressParts.push(lawyer.zip);
    const address = addressParts.join(", ");

    lawyerCard.innerHTML = `
                    <div class="lawyer-photo">
                        <img src="${photoSrc}" alt="${lawyer.lawyer}">
                    </div>
                    <div class="lawyer-info">
                        <h3 class="lawyer-name">${lawyer.lawyer}</h3>
                        <p class="firm-name">${lawyer.firm}</p>
                        ${
                          lawyer.practice
                            ? `<p class="practice-areas">${lawyer.practice}</p>`
                            : ""
                        }
                        ${
                          lawyer.statement
                            ? `<p class="statement">${lawyer.statement}</p>`
                            : ""
                        }
                        <div class="contact-info">
                            ${
                              address
                                ? `<span class="contact-detail">${address}</span>`
                                : ""
                            }
                            ${
                              lawyer.phone
                                ? `<span class="contact-detail">${lawyer.phone}</span>`
                                : ""
                            }
                            <div class="contact-icons">
                                ${
                                  lawyer["con-1"]
                                    ? `<a href="#" class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#04807e"><path d="M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"/></svg></a>`
                                    : ""
                                }
                                ${
                                  lawyer["con-2"]
                                    ? `<a href="#" class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#04807e"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>`
                                    : ""
                                }
                                ${
                                  lawyer["con-3"]
                                    ? `<a href="#" class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#04807e"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a>`
                                    : ""
                                }
                            </div>
                        </div>
                        <div class="lawyer-actions">
                            ${
                              lawyer.phone
                                ? `<button class="btn btn-primary">Call Now</button>`
                                : ""
                            }
                            ${
                              lawyer.website
                                ? `<a href=${lawyer.website} target="_blank" class="btn btn-outline">Visit Website</a>`
                                : ""
                            }
                        </div>
                    </div>
                `;

    lawyerGrid.appendChild(lawyerCard);
  });
}

function createPagination() {
  const totalPages = Math.ceil(filteredLawyers.length / itemsPerPage);
  paginationContainer.innerHTML = "";

  const prevBtn = document.createElement("button");
  prevBtn.className = "page-btn";
  prevBtn.innerHTML = "&lt;";
  prevBtn.disabled = currentPage === 1;
  prevBtn.addEventListener("click", () => {
    if (currentPage > 1) {
      currentPage--;
      renderLawyerCards();
      createPagination();
      window.scrollTo(0, 0);
    }
  });
  paginationContainer.appendChild(prevBtn);

  let startPage = Math.max(1, currentPage - 2);
  let endPage = Math.min(totalPages, currentPage + 2);

  if (currentPage - 2 < 1) {
    endPage = Math.min(totalPages, 5);
  }

  if (currentPage + 2 > totalPages) {
    startPage = Math.max(1, totalPages - 4);
  }

  for (let i = startPage; i <= endPage; i++) {
    const pageBtn = document.createElement("button");
    pageBtn.className = "page-btn";
    pageBtn.textContent = i;
    pageBtn.classList.toggle("active", i === currentPage);
    pageBtn.addEventListener("click", () => {
      currentPage = i;
      renderLawyerCards();
      createPagination();
      window.scrollTo(0, 0);
    });
    paginationContainer.appendChild(pageBtn);
  }

  const nextBtn = document.createElement("button");
  nextBtn.className = "page-btn";
  nextBtn.innerHTML = "&gt;";
  nextBtn.disabled = currentPage === totalPages;
  nextBtn.addEventListener("click", () => {
    if (currentPage < totalPages) {
      currentPage++;
      renderLawyerCards();
      createPagination();
      window.scrollTo(0, 0);
    }
  });
  paginationContainer.appendChild(nextBtn);
}
